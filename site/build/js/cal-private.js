var gumCal=gumCal||{};gumCal.Cals=gumCal.Cals||{},$(function(){var a,b,c=document.querySelectorAll("[data-ad-config]"),d=[],e={};a=function(a,b){{var c=a.querySelector("[data-cal-submit]");document.querySelector('[data-cal-tab="'+b+'"]')}$("#date-from-"+b).datepicker({dateFormat:"yy-mm-dd"}),$("#date-to-"+b).datepicker({dateFormat:"yy-mm-dd"}),yokeInputs(b),c.addEventListener("click",function(c){c.preventDefault(),initCal(c,b,a)})},yokeInputs=function(){for(var a=document.querySelectorAll("[data-master-input]"),b=0;b<a.length;b++)!function(b){a[b].addEventListener("change",function(){var a=this.getAttribute("data-master-input"),b=document.querySelector('[data-puppet-input="'+a+'"]'),c=this.checked;c?b.removeAttribute("disabled"):b.setAttribute("disabled",!0)})}(b)},initCal=function(a,c,e){d[c]&&d[c].close(),d[c]=null,b(a,c,e)},b=function(a,b,c){a.preventDefault();var d={};d.context="private",d.adId=b,d.slotDuration=parseInt(c.querySelector('[id^="slot-duration"]').value),d.startDate=c.querySelector('[id^="date-from"]').value,d.endDate=c.querySelector('[id^="date-to"]').value,d.location=c.querySelector('[id^="location"]').value,d.locationPrivate=c.querySelector('[id^="location-private"]').checked?!0:!1,d.msgRequired=c.querySelector('[id^="public-msg-required"]').checked?!0:!1,d.msgSubject=c.querySelector('[id^="msg-subject"]').value,d.autoConfirm=c.querySelector('[id^="auto-confirm"]').checked?!0:!1,initSlots(d)},initSlots=function(a){var b=a.adId;e[b]=new gumCal.Slots(b),e[b].url="/api/v1/123456789/cal/slots",e[b].fetch({reset:!0}),d[b]=initCalView(a,e[b])},initCalView=function(a,b){var c=$("#cal-"+a.adId),d={settings:a,collection:b},e=new gumCal.CalView(d);return c.append(e.render().el),e},_.each(c,function(b){var c=b.getAttribute("data-ad-id");gumCal.Cals[c]={},a(b,c)})});